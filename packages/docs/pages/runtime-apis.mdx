import { Callout } from 'nextra-theme-docs';

The following APIs are the same as the Web APIS you already know. Additionally, we follow the [WinterCG](https://wintercg.org/) conventions.

## Handler

The only required code to make your Function runnable is to export a `handler` function, that accepts a [`Request`](#request) and returns a [`Response`](#response) (or a promise returning a Response):

```typescript
export function handler(request: Request): Response {
  return new Response('Hello World!');
}
```

Starting from this simple code, you can do whatever you whish, using the Web APIs you already know.

## Global objects

### `console`

Similar to the the standard `console` object on the browser and on Node.js, expect that it only supports the following methods:

- `log`
- `info`
- `debug`
- `warn`
- `error`

You can log multiple objects, and use string substitution. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/console#outputting_text_to_the_console).

---

### `process`

The only usage of `process` is to access [environment variables](/cloud/environment-variables) via `process.env`.

Example:

```typescript
export function handler(request: Request): Response {
  return new Response(`My secret is: ${process.env.SECRET}`);
}
```

---

### `navigator.userAgent`

`navigator.userAgent` is a fixed string that can be used to detect the current runtime. Its value is always `Lagon/VERSION`, where `VERSION` is the current version of the Lagon Runtime.

---

### `crypto`

The standard `crypto` object.

#### `crypto.randomUUID()`

The standard `randomUUID()` method. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/Crypto/randomUUID).

#### `crypto.getRandomValues()`

The standard `getRandomValues()` method. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/Crypto/getRandomValues).

#### `crypto.subtle`

The standard `CryptoSubtle` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto).

<Callout type="info">
  The following table summarizes the supported algorithms on each method:

|         | `sign()`, `verify()` | `encrypt()`, `decrypt()` | `digest()` | `deriveBits()`, `deriveKey()` | `wrapKey()`, `unwrapKey()` |
| ------- | -------------------- | ------------------------ | ---------- | ----------------------------- | -------------------------- |
| HMAC    | ✅                   |                          |            |                               |                            |
| SHA-256 |                      |                          | ✅         |                               |                            |
| SHA-384 |                      |                          | ✅         |                               |                            |
| SHA-512 |                      |                          | ✅         |                               |                            |
| AES-GCM |                      | ✅                       |            |                               | ✅                         |

</Callout>

---

### `TextEncoder`

The standard `TextEncoder` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder).

### `TextDecoder`

The standard `TextDecoder` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder).

### `AbortController`

The standard `AbortController` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/AbortController).

### `AbortSignal`

The standard `AbortSignal` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal).

---

### Fetch

<Callout type="info">Looking for the `fetch()` method? [Jump to fetch()](#fetch-1).</Callout>

#### `Request`

The standard `Request` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/Request).

#### `Response`

The standard `Response` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/Response).

**Streaming**:
You can pass a [`ReadableStream`](#readablestream) object as the `body` of a `Response` to stream the response as more data becomes available. Often, you won't need to implement the logic yourself as it is implemented by the frameworks and libraries you use.

#### `URL`

The standard `URL` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/URL).

<Callout type="warning">This URL implementation only supports URLs with a scheme.</Callout>

#### `URLSearchParams`

The standard `URLSearchParams` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams).

#### `Headers`

The standard `Headers` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/Headers).

---

### Streams

#### `ReadableStream`

The standard `ReadableStream` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream).

#### `ReadableStreamDefaultReader`

The standard `ReadableStreamDefaultReader` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStreamDefaultReader).

#### `WritableStream`

The standard `WritableStream` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/WritableStream).

#### `WritableStreamDefaultWriter`

The standard `WritableStreamDefaultWriter` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/WritableStreamDefaultWriter).

#### `TransformStream`

The standard `TransformStream` object. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/TransformStream).

## Global methods

### `fetch()`

The standard `fetch` method. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/fetch).

### `atob()`

The standard `atob` method. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/atob).

### `btoa()`

The standard `btoa` method. [See the documentation on MDN](https://developer.mozilla.org/en-US/docs/Web/API/btoa).
