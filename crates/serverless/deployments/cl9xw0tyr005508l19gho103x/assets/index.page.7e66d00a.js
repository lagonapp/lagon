import{r as h,u as l,j as u,a as n,b as p,c as _}from"./index.592c891e.js";const g="_item_urmsp_1",b="_done_urmsp_12",k="_input_urmsp_16",y="_buttons_urmsp_28",d={item:g,done:b,input:k,buttons:y},f=({todo:t,refetch:c})=>{const[e,s]=h.exports.useState({text:t.text,editing:!1}),{id:o}=t,{mutate:i}=l(async a=>{const m=await p(["1",0,[o,a]]);return c(),m}),{mutate:x}=l(async()=>{await p(["1",1,[o]]),c()});return u("li",{className:d.item,children:[!e.editing&&u("label",{children:[n("input",{type:"checkbox",checked:t.done,onChange:a=>i({done:a.target.checked})})," ",n("span",{className:t.done?d.done:void 0,children:t.text})," "]}),e.editing&&n("input",{className:d.input,autoFocus:!0,value:e.text,onChange:a=>s({text:a.target.value,editing:!0}),onKeyDown:a=>{a.key==="Enter"?(s({text:t.text,editing:!1}),i({text:e.text})):a.key==="Escape"&&s({text:t.text,editing:!1})}}),u("span",{className:d.buttons,children:[!t.done&&!e.editing&&n("button",{type:"button",onClick:()=>s({text:t.text,editing:!0}),children:"Edit"}),t.done&&n("button",{type:"button",onClick:()=>x(),children:"Delete"}),e.editing&&e.text!==t.text&&n("button",{type:"button",onClick:async()=>{s({text:t.text,editing:!1}),i({text:e.text})},children:"Save"}),e.editing&&n("button",{type:"button",onClick:()=>s({text:t.text,editing:!1}),children:"Cancel"})]})]},t.id)},v="_todoList_rkehu_1",C="_addButton_rkehu_5",N="_p_rkehu_21",S="_input_rkehu_25",r={todoList:v,addButton:C,p:N,input:S};function T(){const{data:t,refetch:c}=_(["0",0,[]],{refetchOnWindowFocus:!0,refetchOnReconnect:!0}),[e,s]=h.exports.useState(""),{mutate:o}=l(async()=>{await p(["0",1,[e]]),c()});return u("main",{children:[n("h1",{children:"Todo"}),n("p",{children:"This is a simple todo application that demonstrates data fetching."}),n("ul",{className:r.todoList,children:t.map(i=>n(f,{todo:i,refetch:c},i.id))}),u("p",{className:r.p,children:[n("input",{className:r.input,value:e,onChange:i=>s(i.target.value)}),n("button",{type:"button",className:r.addButton,disabled:!e,onClick:()=>o(),children:"Add"})]})]})}export{T as default};
